<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CalcuSearch</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='CSS/styles.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
        }

        #loading {
            display: none;
            position: fixed;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.5em;
            color: #333;
            z-index: 9999;
        }

        #Image {
            max-width: 100%;
            height: auto;
            width: 100%;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 9998;
        }

        .search-container {
            margin-top: 100px;
        }

        .navbar-brand {
            font-weight: bold;
        }
        #thethinguphere{
            box-shadow: 0px 15px 25px black;
        }
        #Scanlinesimage{
            position: absolute;
            top:0px;
            left:0px;
            max-width: 100%;
            pointer-events: none;
            height:100%;
            width:100%;
            z-index: 9997;
        }
    </style>
</head>
<body class="bg-light">

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark" id="thethinguphere">
        <div class="container">
            <a class="navbar-brand" href="/">CalcuSearch</a>
            <div class="d-flex">
                <a class="nav-link text-white" href="/view_results">View Results</a>
            </div>
        </div>
    </nav>
    <!--<img id="Scanlinesimage" src="{{url_for('static',filename='assets/scanlines.png')}}"> -->
    <!-- Search Form -->
     <div id = "willblurlater">
    <div class="container search-container">
        <div class="card shadow-sm p-4">
            <h3 class="mb-3 text-center">Search Calculus Topics</h3>
            <form action="/exchange_data" method="POST" onsubmit="showLoading()">
                <div class="mb-3">
                    <input class="form-control" type="text" name="query" placeholder="Enter your calculus search (e.g. derivatives)" required>
                </div>
                <div class="d-grid">
                    <button class="btn btn-primary btn-lg" type="submit">üîç Search</button>
                </div>
            </form>
        </div>
    </div>
</div>
    <!-- Loading Indicator -->
    <div id="loading">‚è≥ Please wait, compiling info...</div>

    <!-- Intro Animation -->
    <img id="Image" src="{{ url_for('static', filename='assets/FirstFramefr.png') }}" alt="intro animation">

    <!-- JS -->
    <script>
        window.onload = function () {
            document.getElementById("loading").style.display = "none";
            if(localStorage.getItem("viewed")!= 'true'){
            const gifPath = "{{ url_for('static', filename='assets/Calcuintro.gif') }}";
            document.getElementById("Image").src = gifPath + "?" + new Date().getTime();

            setTimeout(() => {
                document.getElementById("Image").style.display = "none";
            }, 4600);
        }else{
            document.getElementById("Image").style.display = "none";
        }
        localStorage.setItem('viewed','true');
        };

        function showLoading() {
            document.getElementById("loading").style.display = "block";
            document.getElementById("willblurlater").id= "nowblur";
            
        }
    </script>
</body>
</html>
